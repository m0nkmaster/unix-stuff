#!/bin/sh 
#
# Reithproxies script = sets up my mac for working on or off Reith


# defaults
localeName=work
networkLocation=On

PS3="Are you on the Reith network (enter 1 or 2)?"
options=("y" "n")
select yn in "${options[@]}"
do
    case $yn in
        "y")
            . ~/.reithproxies
            break
            ;;
        "n")
            localeName=home
            networkLocation=Off
            . ~/.removeproxies
            break
            ;;
        *)
            echo 'Incorrect selection, try again...'
            echo $yn
            ;;
    esac
done

# Stop stunnel
killall stunnel

# Always use my .bashrc 
. ~/.bashrc

echo "Changing SVN settings"
ln -sf /Volumes/SecureDrive/subversion/servers.$localeName /Volumes/SecureDrive/subversion/servers

echo "Changing Stunnel settings"
ln -sf /Volumes/SecureDrive/stunnel/stunnel-$localeName.conf /Volumes/SecureDrive/stunnel/stunnel.conf
stunnel

echo "Switching Network Location"
sudo networksetup -switchtolocation "BBC $networkLocation Network"